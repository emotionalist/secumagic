<!DOCTYPE html>
<html lang="kr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css" href="css/Select.css" />
  <title>SecuMagic - 보안 솔루션</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<header>
  <nav class="navbar">
    <div class="logo">
      <a href="/main">SecuMagic</a>
    </div>
  </nav>
</header>

<main>
  <h1 class="page-title">기업 맞춤형 보안 솔루션</h1>
  <div class="content">
    <section class="sidebar">
      <label for="industry" class="dropdown-label">산업 분야</label>
      <select id="industry" class="dropdown">
        <option>교육</option>
        <option>제조</option>
        <option>IT</option>
        <option>에너지</option>
        <option>법률</option>
        <option>금융</option>
        <option>의료</option>
        <option>정부</option>
        <option>항공</option>
      </select>

      <label for="company-size" class="dropdown-label">회사 규모</label>
      <input type="number" id="company-size" class="input-field" placeholder="숫자만 입력하세요" />

      <label for="architecture-link" class="dropdown-label">아키텍처 토폴로지 도구</label>
      <div class="link-box">
        <a href="https://www.microsoft365.com/template/Visio/?culture=en-us&country=us&categoryId=TemplateCategory_BasicNetworkDiagram"
           target="_blank">
          <img src="images/visio.jpg" alt="Visio Template" class="visio-image" />
        </a>
      </div>

      <div class="upload-section">
        <label>Upload Resume</label>
        <div class="upload-box">
          <p>Browse and choose the files you want to upload from your computer</p>
          <input type="file" id="fileInput">
        </div>
      </div>

      <button id="submit-button" class="submit-button">Submit</button>
    </section>

    <section class="main-content">
      <div class="notification">
        <div class="notification-content">
          <h3 class="notification-title">Notification Title</h3>
          <p>Here's notification text.</p>
        </div>
      </div>
    </section>
  </div>
</main>

<script>
  $(document).ready(function () {
    // 문서가 준비되었을 때 실행
    $('#submit-button').click(function () {
      // 제출 버튼 클릭 이벤트 핸들러

      // 입력 필드 값 가져오기
      const industry = $('#industry').val(); // 산업 분야
      const companySize = $('#company-size').val(); // 회사 규모
      const fileInput = $('#fileInput')[0].files[0]; // 업로드된 파일

      // 파일이 선택되지 않은 경우 알림 표시 후 함수 종료
      if (!fileInput) {
        alert("Please select a file to upload."); // 파일 선택 경고 메시지
        return;
      }

      // 서버로 전송할 FormData 객체 생성
      const formData = new FormData();
      formData.append("industry", industry); // 산업 분야 추가
      formData.append("companySize", companySize); // 회사 규모 추가
      formData.append("file", fileInput); // 업로드된 파일 추가

      // AJAX 요청을 통해 서버에 데이터 전송
      $.ajax({
        url: '/processData', // 데이터 전송 URL
        type: 'POST', // HTTP 메서드: POST
        data: formData, // 전송할 데이터
        contentType: false, // 데이터 타입을 자동으로 설정
        processData: false, // 데이터 직렬화를 하지 않음
        success: function (response) {
          // 요청이 성공하면 실행되는 콜백 함수
          alert("Data submitted successfully!"); // 성공 메시지 표시

          // 응답 데이터를 Notification Title 섹션에 표시
          $('.notification-title').text(`Industry: ${response.industry}`);
          $('.notification-content').append(`
            <p>Company Size: ${response.companySize}</p>
            <p>File Name: ${response.fileName}</p>
          `);
        },
        error: function () {
          // 요청이 실패하면 실행되는 콜백 함수
          alert("An error occurred while processing your request."); // 에러 메시지 표시
        }
      });
    });
  });
</script>

</body>
</html>
